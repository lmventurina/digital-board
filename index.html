<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NPHS Digital Bulletin Board</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    html, body, #root {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    
    @keyframes scroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    
    .ticker-scroll {
      animation: scroll 60s linear infinite;
    }
    
    .ticker-scroll:hover {
      animation-play-state: paused;
    }

    .announcement-card {
      transition: opacity 0.5s ease-in-out;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="root" class="w-full h-full overflow-auto"></div>
  <script>
    // Mock data
    const mockData = {
      announcements: [
        { id: '1', title: 'Science Fair Winners', description: 'Congratulations to our science fair champions!', type: 'Science', urgent: false },
        { id: '2', title: 'Coding Competition', description: 'Sign up for the regional coding challenge by Friday.', type: 'Tech', urgent: false },
        { id: '3', title: 'Basketball Game Tonight', description: 'Warriors vs. Eagles at 6 PM in the gym.', type: 'Sports', urgent: false },
        { id: '4', title: 'Early Dismissal Tomorrow', description: 'School will dismiss at 1 PM for staff development.', type: 'General', urgent: true }
      ],
      ticker: [
        'School photos will be taken next week - order forms available in the office',
        'Join us for the winter concert on January 25th at 7 PM',
        'Remind students to check lost and found before winter break'
      ],
      events: [
        { id: '1', title: 'Basketball Game', date: 'Today, 6:00 PM', location: 'Main Gym' },
        { id: '2', title: 'Science Fair', date: 'Tomorrow, 9:00 AM', location: 'Cafeteria' },
        { id: '3', title: 'Winter Concert', date: 'Friday, 7:00 PM', location: 'Auditorium' },
        { id: '4', title: 'Parent-Teacher Conferences', date: 'Next Monday, 3:00 PM', location: 'Classrooms' }
      ]
    };

    let currentData = {
      announcements: [...mockData.announcements],
      ticker: [...mockData.ticker],
      events: [...mockData.events],
      studentSpotlights: [
        { id: '1', title: 'Tech Spotlight', description: 'Congratulations to our students for their outstanding achievements in technology projects this week!' },
        { id: '2', title: 'Science Fair Winner', description: 'Amazing work by our student on their climate change research project!' }
      ],
      teacherSpotlights: [
        { id: '1', name: 'Ms. Sarah Johnson', department: 'Technology Department', description: 'Celebrating 15 years of inspiring students in computer science and robotics. Thank you for your dedication!' },
        { id: '2', name: 'Mr. David Chen', department: 'Mathematics', description: 'Outstanding dedication to student success and innovative teaching methods.' }
      ]
    };

    let currentStudentSpotlightIndex = 0;
    let currentTeacherSpotlightIndex = 0;
    let studentSpotlightInterval = null;
    let teacherSpotlightInterval = null;

    let currentAnnouncementIndex = 0;
    let announcementInterval = null;
    let weatherData = null;
    let weatherLoading = true;
    let currentLocation = '';

    const defaultConfig = {
      background_color: '#f3f4f6',
      surface_color: '#ffffff',
      primary_color: '#003893',
      accent_color: '#facc15',
      text_color: '#333333',
      font_family: 'system-ui',
      font_size: 16,
      school_name: 'Navajo Pine High School',
      school_subtitle: 'School of Technology',
      location: 'Navajo, NM',
      spotlight_title: 'Student Spotlight',
      teacher_spotlight_title: 'Teacher/Staff Spotlight',
      announcements_title: 'Announcements',
      events_title: 'Upcoming Events'
    };

    function formatDate(date) {
      return date.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
    }

    function formatTime(date) {
      return date.toLocaleTimeString('en-US', { 
        hour: 'numeric', 
        minute: '2-digit',
        second: '2-digit'
      });
    }

    async function fetchWeather(location) {
      try {
        weatherLoading = true;
        updateWeatherDisplay();
        
        const geoResponse = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(location)}&count=1&language=en&format=json`);
        const geoData = await geoResponse.json();
        
        if (!geoData.results || geoData.results.length === 0) {
          throw new Error('Location not found');
        }
        
        const { latitude, longitude, name } = geoData.results[0];
        
        const weatherResponse = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&daily=temperature_2m_max,temperature_2m_min,weathercode&temperature_unit=fahrenheit&timezone=auto&forecast_days=1`);
        const weather = await weatherResponse.json();
        
        weatherData = {
          high: Math.round(weather.daily.temperature_2m_max[0]),
          low: Math.round(weather.daily.temperature_2m_min[0]),
          code: weather.daily.weathercode[0],
          locationName: name
        };
        weatherLoading = false;
        updateWeatherDisplay();
      } catch (error) {
        weatherData = {
          high: 72,
          low: 58,
          code: 1,
          locationName: location
        };
        weatherLoading = false;
        updateWeatherDisplay();
      }
    }

    function getWeatherIcon(code) {
      if (code === 0) return '‚òÄÔ∏è';
      if (code <= 3) return '‚õÖ';
      if (code <= 48) return 'üå´Ô∏è';
      if (code <= 67) return 'üåßÔ∏è';
      if (code <= 77) return 'üå®Ô∏è';
      if (code <= 82) return 'üå¶Ô∏è';
      if (code <= 86) return 'üå®Ô∏è';
      if (code <= 99) return '‚õàÔ∏è';
      return '‚òÄÔ∏è';
    }

    function updateWeatherDisplay() {
      const weatherContainer = document.getElementById('weather-display');
      if (!weatherContainer) return;
      
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      
      if (weatherLoading) {
        weatherContainer.innerHTML = `
          <span style="font-size: 1.5rem;">‚è≥</span>
          <div>
            <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.7}px; opacity: 0.9;">
              ${config.location}
            </div>
            <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; font-weight: 600;">
              Loading...
            </div>
          </div>
        `;
      } else if (weatherData) {
        weatherContainer.innerHTML = `
          <span style="font-size: 1.5rem;">${getWeatherIcon(weatherData.code)}</span>
          <div>
            <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.7}px; opacity: 0.9;">
              ${weatherData.locationName}
            </div>
            <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; font-weight: 600;">
              ${weatherData.high}¬∞ / ${weatherData.low}¬∞
            </div>
          </div>
        `;
      }
    }

    function getAnnouncementIcon(type) {
      const icons = {
        'Science': 'üî¨',
        'Tech': 'üíª',
        'Sports': 'üèÜ',
        'General': 'üì¢'
      };
      return icons[type] || 'üì¢';
    }

    function createWarriorLogo(primaryColor, accentColor) {
      return `
        <svg width="50" height="50" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="22" fill="${primaryColor}" />
          <path d="M 30 45 Q 22 35 18 25 L 20 28 Q 26 38 30 45" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 28 40 Q 18 28 12 15 L 14 18 Q 22 32 28 40" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 26 35 Q 14 20 8 8 L 10 11 Q 20 28 26 35" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 32 50 Q 26 42 22 32 L 24 35 Q 29 44 32 50" fill="#dc2626" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 34 55 Q 30 48 27 40 L 29 43 Q 32 50 34 55" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 36 60 Q 34 53 32 46 L 34 49 Q 35 55 36 60" fill="#dc2626" stroke="${primaryColor}" stroke-width="0.5" />
          <circle cx="56" cy="47" r="2.5" fill="white" />
          <circle cx="56" cy="47" r="1" fill="${primaryColor}" />
          <rect x="30" y="49" width="42" height="5" fill="${accentColor}" />
          <circle cx="35" cy="51.5" r="1.5" fill="#dc2626" />
          <circle cx="42" cy="51.5" r="1.5" fill="#dc2626" />
          <circle cx="49" cy="51.5" r="1.5" fill="#dc2626" />
          <circle cx="56" cy="51.5" r="1.5" fill="#dc2626" />
          <circle cx="63" cy="51.5" r="1.5" fill="#dc2626" />
          <path d="M 42 75 L 50 88 L 58 75 Z" fill="${primaryColor}" />
          <path d="M 35 80 L 43 93 L 51 80 Z" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 49 80 L 57 93 L 65 80 Z" fill="${accentColor}" stroke="${primaryColor}" stroke-width="0.5" />
          <path d="M 50 70 L 54 74 L 50 78 L 46 74 Z" fill="#dc2626" />
        </svg>
      `;
    }

    function render(config) {
      const now = new Date();
      
      // Fetch weather if location changed
      if (config.location !== currentLocation) {
        currentLocation = config.location;
        fetchWeather(config.location);
      }
      
      const root = document.getElementById('root');
      root.innerHTML = `
        <div style="background-color: ${config.background_color}; width: 100%; min-height: 100%;">
          <!-- Header -->
          <header style="background-color: ${config.primary_color}; color: white; padding: 1rem;">
            <div style="max-width: 1400px; margin: 0 auto;">
              <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                  <div style="background-color: white; padding: 0.75rem; border-radius: 0.5rem;">
                    ${createWarriorLogo(config.primary_color, config.accent_color)}
                  </div>
                  <div>
                    <h1 style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.6}px; font-weight: bold; margin: 0;">
                      ${config.school_name}
                    </h1>
                    <p style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; opacity: 0.9; margin: 0.25rem 0 0 0;">
                      ${config.school_subtitle}
                    </p>
                  </div>
                </div>
                
                <div style="display: flex; align-items: center; gap: 1.5rem;">
                  <div style="text-align: right;">
                    <div id="time-display" style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.5}px; font-weight: bold;">
                      ${formatTime(now)}
                    </div>
                    <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.75}px; opacity: 0.9;">
                      ${formatDate(now)}
                    </div>
                  </div>
                  
                  <div id="weather-display" style="background-color: rgba(255, 255, 255, 0.2); padding: 0.5rem 0.75rem; border-radius: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">‚è≥</span>
                    <div>
                      <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.7}px; opacity: 0.9;">
                        ${config.location}
                      </div>
                      <div style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; font-weight: 600;">
                        Loading...
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </header>

          <!-- Ticker -->
          <div style="background-color: ${config.accent_color}; padding: 0.5rem 0; overflow: hidden;">
            <div class="ticker-scroll" style="white-space: nowrap;">
              <span style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; font-weight: 600;">
                ${currentData.ticker.join(' ‚Ä¢ ')}
              </span>
            </div>
          </div>

          <!-- Main Content -->
          <main style="max-width: 1400px; margin: 0 auto; padding: 1rem; height: calc(100% - 180px); display: flex; flex-direction: column;">
            <!-- Grid Layout -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr); gap: 1rem; height: 100%;">
              <!-- Student Spotlight -->
              <div style="background: linear-gradient(135deg, ${config.primary_color} 0%, ${config.accent_color} 100%); border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1rem; display: flex; flex-direction: column; min-height: 0;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                  <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.25rem;">üèÜ</span>
                    <h2 style="color: white; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.2}px; font-weight: bold; margin: 0;">
                      ${config.spotlight_title}
                    </h2>
                  </div>
                  ${currentData.studentSpotlights.length > 1 ? `
                  <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button onclick="previousStudentSpotlight()" style="background-color: rgba(255,255,255,0.9); color: ${config.primary_color}; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚óÄ
                    </button>
                    <span id="student-spotlight-counter" style="color: white; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; min-width: 50px; text-align: center;">
                      1/${currentData.studentSpotlights.length}
                    </span>
                    <button onclick="nextStudentSpotlight()" style="background-color: rgba(255,255,255,0.9); color: ${config.primary_color}; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚ñ∂
                    </button>
                  </div>
                  ` : ''}
                </div>
                <div id="student-spotlight-container" style="background-color: rgba(255,255,255,0.95); border-radius: 0.5rem; padding: 1rem; text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                  ${currentData.studentSpotlights.length > 0 ? `
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üèÜ</div>
                    <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: bold; margin-bottom: 0.5rem;">
                      ${currentData.studentSpotlights[0].title}
                    </div>
                    <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px;">
                      ${currentData.studentSpotlights[0].description}
                    </div>
                  ` : `
                    <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; opacity: 0.5;">
                      No student spotlight at this time
                    </div>
                  `}
                </div>
              </div>

              <!-- Teacher/Staff Spotlight -->
              <div style="background: linear-gradient(135deg, ${config.primary_color} 0%, ${config.accent_color} 100%); border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1rem; display: flex; flex-direction: column; min-height: 0;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                  <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.25rem;">üë®‚Äçüè´</span>
                    <h2 style="color: white; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.2}px; font-weight: bold; margin: 0;">
                      ${config.teacher_spotlight_title}
                    </h2>
                  </div>
                  ${currentData.teacherSpotlights.length > 1 ? `
                  <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button onclick="previousTeacherSpotlight()" style="background-color: rgba(255,255,255,0.9); color: ${config.primary_color}; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚óÄ
                    </button>
                    <span id="teacher-spotlight-counter" style="color: white; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; min-width: 50px; text-align: center;">
                      1/${currentData.teacherSpotlights.length}
                    </span>
                    <button onclick="nextTeacherSpotlight()" style="background-color: rgba(255,255,255,0.9); color: ${config.primary_color}; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚ñ∂
                    </button>
                  </div>
                  ` : ''}
                </div>
                <div id="teacher-spotlight-container" style="background-color: rgba(255,255,255,0.95); border-radius: 0.5rem; padding: 1rem; flex: 1; display: flex; align-items: center;">
                  ${currentData.teacherSpotlights.length > 0 ? `
                    <div style="display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; width: 100%;">
                      <div style="width: 60px; height: 60px; background-color: ${config.primary_color}; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; flex-shrink: 0;">
                        üë©‚Äçüè´
                      </div>
                      <div style="flex: 1; min-width: 150px;">
                        <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.05}px; font-weight: bold; margin-bottom: 0.25rem;">
                          ${currentData.teacherSpotlights[0].name}
                        </div>
                        <div style="color: ${config.primary_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; font-weight: 600; margin-bottom: 0.25rem;">
                          ${currentData.teacherSpotlights[0].department}
                        </div>
                        <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.8}px; line-height: 1.4;">
                          ${currentData.teacherSpotlights[0].description}
                        </div>
                      </div>
                    </div>
                  ` : `
                    <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; text-align: center; width: 100%; opacity: 0.5;">
                      No teacher spotlight at this time
                    </div>
                  `}
                </div>
              </div>

              <!-- Upcoming Events -->
              <div style="background-color: ${config.surface_color}; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1rem; display: flex; flex-direction: column; min-height: 0;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                  <span style="color: ${config.accent_color}; font-size: 1.25rem;">üìÖ</span>
                  <h2 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.2}px; font-weight: bold; margin: 0;">
                    ${config.events_title}
                  </h2>
                </div>
                <div style="flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 0.75rem;">
                  ${currentData.events.map(event => `
                    <div style="background-color: ${config.background_color}; padding: 0.75rem; border-radius: 0.5rem; border-left: 4px solid ${config.primary_color};">
                      <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 700; margin-bottom: 0.25rem;">
                        ${event.title}
                      </div>
                      <div style="color: ${config.primary_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; font-weight: 600; margin-bottom: 0.25rem;">
                        üìÖ ${event.date}
                      </div>
                      <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.8}px; opacity: 0.75;">
                        üìç ${event.location}
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>

              <!-- Announcements -->
              <div style="background-color: ${config.surface_color}; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1rem; display: flex; flex-direction: column; min-height: 0;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                  <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: ${config.accent_color}; font-size: 1.25rem;">üì¢</span>
                    <h2 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.2}px; font-weight: bold; margin: 0;">
                      ${config.announcements_title}
                    </h2>
                  </div>
                  <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button onclick="previousAnnouncement()" style="background-color: ${config.primary_color}; color: white; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚óÄ
                    </button>
                    <span id="announcement-counter" style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; min-width: 50px; text-align: center;">
                      1/${currentData.announcements.length}
                    </span>
                    <button onclick="nextAnnouncement()" style="background-color: ${config.primary_color}; color: white; border: none; border-radius: 0.25rem; padding: 0.5rem 0.75rem; cursor: pointer; font-size: 1rem; font-weight: bold;">
                      ‚ñ∂
                    </button>
                  </div>
                </div>
                <div id="announcement-container" style="flex: 1; position: relative; overflow-y: auto;">
                  ${currentData.announcements.length > 0 ? `
                    <div class="announcement-card" style="background-color: ${currentData.announcements[0].urgent ? '#fee2e2' : config.background_color}; border: 2px solid ${currentData.announcements[0].urgent ? '#dc2626' : 'transparent'}; padding: 1rem; border-radius: 0.5rem; height: 100%; display: flex; align-items: center;">
                      <div style="display: flex; align-items: start; gap: 0.75rem; width: 100%;">
                        <div style="color: ${config.primary_color}; font-size: 2rem;">
                          ${getAnnouncementIcon(currentData.announcements[0].type)}
                        </div>
                        <div style="flex: 1;">
                          <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; flex-wrap: wrap;">
                            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 700;">
                              ${currentData.announcements[0].title}
                            </div>
                            ${currentData.announcements[0].urgent ? `<span style="background-color: #dc2626; color: white; padding: 0.25rem 0.75rem; border-radius: 0.25rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.7}px; font-weight: 700;">URGENT</span>` : ''}
                          </div>
                          <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; line-height: 1.5; margin-bottom: 0.5rem;">
                            ${currentData.announcements[0].description}
                          </div>
                          <div style="color: ${config.primary_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.8}px; font-weight: 700;">
                            ${currentData.announcements[0].type}
                          </div>
                        </div>
                      </div>
                    </div>
                  ` : `
                    <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; text-align: center; padding: 2rem; opacity: 0.5; height: 100%; display: flex; align-items: center; justify-content: center;">
                      No announcements at this time
                    </div>
                  `}
                </div>
              </div>
            </div>
          </main>

          <!-- Admin Button -->
          <button onclick="openAdmin()" style="position: fixed; bottom: 1.5rem; right: 1.5rem; background-color: ${config.primary_color}; color: white; padding: 1rem; border-radius: 50%; border: none; box-shadow: 0 4px 6px rgba(0,0,0,0.2); cursor: pointer; font-size: 1.5rem;" title="Admin Panel">
            ‚öôÔ∏è
          </button>

          <!-- Admin Modal (hidden by default) -->
          <div id="admin-modal" style="display: none; position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); z-index: 1000; padding: 1rem;">
            <div style="background-color: ${config.surface_color}; border-radius: 0.5rem; box-shadow: 0 20px 25px rgba(0,0,0,0.3); width: 100%; max-width: 900px; max-height: 90%; margin: auto; display: flex; flex-direction: column; overflow: hidden;">
              <div style="background-color: ${config.primary_color}; padding: 1.5rem; color: white; display: flex; align-items: center; justify-content: space-between;">
                <h2 style="font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.5}px; font-weight: bold; margin: 0;">
                  Admin Panel
                </h2>
                <button onclick="closeAdmin()" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; padding: 0.25rem;">‚úï</button>
              </div>

              <div style="display: flex; border-bottom: 1px solid #e5e7eb; overflow-x: auto;">
                <button id="tab-announcements" onclick="switchTab('announcements')" style="padding: 0.75rem 1.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; border: none; background: none; cursor: pointer; border-bottom: 2px solid ${config.primary_color}; color: ${config.primary_color}; white-space: nowrap;">
                  Announcements
                </button>
                <button id="tab-ticker" onclick="switchTab('ticker')" style="padding: 0.75rem 1.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: ${config.text_color}; white-space: nowrap;">
                  Ticker
                </button>
                <button id="tab-events" onclick="switchTab('events')" style="padding: 0.75rem 1.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: ${config.text_color}; white-space: nowrap;">
                  Events
                </button>
                <button id="tab-student-spotlight" onclick="switchTab('student-spotlight')" style="padding: 0.75rem 1.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: ${config.text_color}; white-space: nowrap;">
                  Student Spotlight
                </button>
                <button id="tab-teacher-spotlight" onclick="switchTab('teacher-spotlight')" style="padding: 0.75rem 1.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; border: none; background: none; cursor: pointer; border-bottom: 2px solid transparent; color: ${config.text_color}; white-space: nowrap;">
                  Teacher Spotlight
                </button>
              </div>

              <div id="admin-content" style="flex: 1; overflow-y: auto; padding: 1.5rem;">
                <!-- Content will be inserted here -->
              </div>
            </div>
          </div>
        </div>
      `;

      // Update weather display with current data
      updateWeatherDisplay();

      // Start clock update
      updateClock();
      setInterval(updateClock, 1000);

      // Start carousels
      startAnnouncementCarousel();
      startStudentSpotlightCarousel();
      startTeacherSpotlightCarousel();

      // Show announcements tab by default
      switchTab('announcements');
    }

    function updateClock() {
      const timeDisplay = document.getElementById('time-display');
      if (timeDisplay) {
        timeDisplay.textContent = formatTime(new Date());
      }
    }

    function startAnnouncementCarousel() {
      if (announcementInterval) {
        clearInterval(announcementInterval);
      }
      
      if (currentData.announcements.length > 1) {
        announcementInterval = setInterval(() => {
          nextAnnouncement();
        }, 5000);
      }
    }

    function startStudentSpotlightCarousel() {
      if (studentSpotlightInterval) {
        clearInterval(studentSpotlightInterval);
      }
      
      if (currentData.studentSpotlights.length > 1) {
        studentSpotlightInterval = setInterval(() => {
          nextStudentSpotlight();
        }, 7000);
      }
    }

    function startTeacherSpotlightCarousel() {
      if (teacherSpotlightInterval) {
        clearInterval(teacherSpotlightInterval);
      }
      
      if (currentData.teacherSpotlights.length > 1) {
        teacherSpotlightInterval = setInterval(() => {
          nextTeacherSpotlight();
        }, 7000);
      }
    }

    function showAnnouncement(index) {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const container = document.getElementById('announcement-container');
      const counter = document.getElementById('announcement-counter');
      
      if (!container || !currentData.announcements.length) return;
      
      currentAnnouncementIndex = index;
      const announcement = currentData.announcements[index];
      
      if (counter) {
        counter.textContent = `${index + 1}/${currentData.announcements.length}`;
      }
      
      container.innerHTML = `
        <div class="announcement-card" style="background-color: ${announcement.urgent ? '#fee2e2' : config.background_color}; border: 2px solid ${announcement.urgent ? '#dc2626' : 'transparent'}; padding: 1rem; border-radius: 0.5rem; height: 100%; display: flex; align-items: center;">
          <div style="display: flex; align-items: start; gap: 0.75rem; width: 100%;">
            <div style="color: ${config.primary_color}; font-size: 2rem;">
              ${getAnnouncementIcon(announcement.type)}
            </div>
            <div style="flex: 1;">
              <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; flex-wrap: wrap;">
                <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 700;">
                  ${announcement.title}
                </div>
                ${announcement.urgent ? `<span style="background-color: #dc2626; color: white; padding: 0.25rem 0.75rem; border-radius: 0.25rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.7}px; font-weight: 700;">URGENT</span>` : ''}
              </div>
              <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.95}px; line-height: 1.5; margin-bottom: 0.5rem;">
                ${announcement.description}
              </div>
              <div style="color: ${config.primary_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.8}px; font-weight: 700;">
                ${announcement.type}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function nextAnnouncement() {
      if (currentData.announcements.length === 0) return;
      const nextIndex = (currentAnnouncementIndex + 1) % currentData.announcements.length;
      showAnnouncement(nextIndex);
    }

    function previousAnnouncement() {
      if (currentData.announcements.length === 0) return;
      const prevIndex = currentAnnouncementIndex === 0 ? currentData.announcements.length - 1 : currentAnnouncementIndex - 1;
      showAnnouncement(prevIndex);
    }

    function showStudentSpotlight(index) {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const container = document.getElementById('student-spotlight-container');
      const counter = document.getElementById('student-spotlight-counter');
      
      if (!container || !currentData.studentSpotlights.length) return;
      
      currentStudentSpotlightIndex = index;
      const spotlight = currentData.studentSpotlights[index];
      
      if (counter) {
        counter.textContent = `${index + 1}/${currentData.studentSpotlights.length}`;
      }
      
      container.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 0.5rem;">üèÜ</div>
        <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: bold; margin-bottom: 0.5rem;">
          ${spotlight.title}
        </div>
        <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px;">
          ${spotlight.description}
        </div>
      `;
    }

    function nextStudentSpotlight() {
      if (currentData.studentSpotlights.length === 0) return;
      const nextIndex = (currentStudentSpotlightIndex + 1) % currentData.studentSpotlights.length;
      showStudentSpotlight(nextIndex);
    }

    function previousStudentSpotlight() {
      if (currentData.studentSpotlights.length === 0) return;
      const prevIndex = currentStudentSpotlightIndex === 0 ? currentData.studentSpotlights.length - 1 : currentStudentSpotlightIndex - 1;
      showStudentSpotlight(prevIndex);
    }

    function showTeacherSpotlight(index) {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const container = document.getElementById('teacher-spotlight-container');
      const counter = document.getElementById('teacher-spotlight-counter');
      
      if (!container || !currentData.teacherSpotlights.length) return;
      
      currentTeacherSpotlightIndex = index;
      const spotlight = currentData.teacherSpotlights[index];
      
      if (counter) {
        counter.textContent = `${index + 1}/${currentData.teacherSpotlights.length}`;
      }
      
      container.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; width: 100%;">
          <div style="width: 60px; height: 60px; background-color: ${config.primary_color}; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; flex-shrink: 0;">
            üë©‚Äçüè´
          </div>
          <div style="flex: 1; min-width: 150px;">
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.05}px; font-weight: bold; margin-bottom: 0.25rem;">
              ${spotlight.name}
            </div>
            <div style="color: ${config.primary_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; font-weight: 600; margin-bottom: 0.25rem;">
              ${spotlight.department}
            </div>
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.8}px; line-height: 1.4;">
              ${spotlight.description}
            </div>
          </div>
        </div>
      `;
    }

    function nextTeacherSpotlight() {
      if (currentData.teacherSpotlights.length === 0) return;
      const nextIndex = (currentTeacherSpotlightIndex + 1) % currentData.teacherSpotlights.length;
      showTeacherSpotlight(nextIndex);
    }

    function previousTeacherSpotlight() {
      if (currentData.teacherSpotlights.length === 0) return;
      const prevIndex = currentTeacherSpotlightIndex === 0 ? currentData.teacherSpotlights.length - 1 : currentTeacherSpotlightIndex - 1;
      showTeacherSpotlight(prevIndex);
    }

    function openAdmin() {
      document.getElementById('admin-modal').style.display = 'flex';
    }

    function closeAdmin() {
      document.getElementById('admin-modal').style.display = 'none';
    }

    function switchTab(tab) {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      
      // Update tab buttons
      ['announcements', 'ticker', 'events', 'student-spotlight', 'teacher-spotlight'].forEach(t => {
        const btn = document.getElementById(`tab-${t}`);
        if (btn) {
          if (t === tab) {
            btn.style.borderBottomColor = config.primary_color;
            btn.style.color = config.primary_color;
          } else {
            btn.style.borderBottomColor = 'transparent';
            btn.style.color = config.text_color;
          }
        }
      });

      const content = document.getElementById('admin-content');
      if (!content) return;

      if (tab === 'announcements') {
        content.innerHTML = `
          <h3 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.25}px; font-weight: bold; margin-bottom: 1rem;">
            Manage Announcements
          </h3>
          <div style="margin-bottom: 1rem;">
            <label for="ann-title" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Title
            </label>
            <input type="text" id="ann-title" placeholder="Announcement title" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="ann-desc" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Description
            </label>
            <textarea id="ann-desc" placeholder="Announcement details" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;"></textarea>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
            <div>
              <label for="ann-type" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
                Type
              </label>
              <select id="ann-type" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
                <option>General</option>
                <option>Science</option>
                <option>Tech</option>
                <option>Sports</option>
              </select>
            </div>
            <div>
              <label for="ann-urgent" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
                Urgent
              </label>
              <label style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; cursor: pointer;">
                <input type="checkbox" id="ann-urgent" style="width: 1.25rem; height: 1.25rem;">
                <span style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
                  Mark as urgent
                </span>
              </label>
            </div>
          </div>
          <button onclick="addAnnouncement()" style="background-color: ${config.primary_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; cursor: pointer;">
            ‚ûï Add Announcement
          </button>
          
          <div style="margin-top: 1.5rem;">
            <h4 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 600; margin-bottom: 0.75rem;">
              Current Announcements
            </h4>
            <div id="ann-list"></div>
          </div>
        `;
        renderAnnouncementList();
      } else if (tab === 'ticker') {
        content.innerHTML = `
          <h3 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.25}px; font-weight: bold; margin-bottom: 1rem;">
            Manage Ticker Messages
          </h3>
          <div style="margin-bottom: 1rem;">
            <label for="ticker-msg" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              New Message
            </label>
            <input type="text" id="ticker-msg" placeholder="Enter ticker message" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <button onclick="addTicker()" style="background-color: ${config.primary_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; cursor: pointer;">
            ‚ûï Add Message
          </button>
          
          <div style="margin-top: 1.5rem;">
            <h4 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 600; margin-bottom: 0.75rem;">
              Current Messages
            </h4>
            <div id="ticker-list"></div>
          </div>
        `;
        renderTickerList();
      } else if (tab === 'events') {
        content.innerHTML = `
          <h3 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.25}px; font-weight: bold; margin-bottom: 1rem;">
            Manage Events
          </h3>
          <div style="margin-bottom: 1rem;">
            <label for="event-title" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Event Title
            </label>
            <input type="text" id="event-title" placeholder="Event name" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="event-date" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Date & Time
            </label>
            <input type="text" id="event-date" placeholder="e.g., Tomorrow, 3:00 PM" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="event-location" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Location
            </label>
            <input type="text" id="event-location" placeholder="Event location" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <button onclick="addEvent()" style="background-color: ${config.primary_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; cursor: pointer;">
            ‚ûï Add Event
          </button>
          
          <div style="margin-top: 1.5rem;">
            <h4 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 600; margin-bottom: 0.75rem;">
              Current Events
            </h4>
            <div id="event-list"></div>
          </div>
        `;
        renderEventList();
      } else if (tab === 'student-spotlight') {
        content.innerHTML = `
          <h3 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.25}px; font-weight: bold; margin-bottom: 1rem;">
            Manage Student Spotlights
          </h3>
          <div style="margin-bottom: 1rem;">
            <label for="student-title" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Spotlight Title
            </label>
            <input type="text" id="student-title" placeholder="e.g., Tech Spotlight" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="student-desc" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Description
            </label>
            <textarea id="student-desc" placeholder="Student achievement details" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;"></textarea>
          </div>
          <button onclick="addStudentSpotlight()" style="background-color: ${config.primary_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; cursor: pointer;">
            ‚ûï Add Student Spotlight
          </button>
          
          <div style="margin-top: 1.5rem;">
            <h4 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 600; margin-bottom: 0.75rem;">
              Current Student Spotlights
            </h4>
            <div id="student-spotlight-list"></div>
          </div>
        `;
        renderStudentSpotlightList();
      } else if (tab === 'teacher-spotlight') {
        content.innerHTML = `
          <h3 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.25}px; font-weight: bold; margin-bottom: 1rem;">
            Manage Teacher/Staff Spotlights
          </h3>
          <div style="margin-bottom: 1rem;">
            <label for="teacher-name" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Name
            </label>
            <input type="text" id="teacher-name" placeholder="e.g., Ms. Sarah Johnson" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="teacher-dept" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Department
            </label>
            <input type="text" id="teacher-dept" placeholder="e.g., Technology Department" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
          </div>
          <div style="margin-bottom: 1rem;">
            <label for="teacher-desc" style="display: block; color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.9}px; font-weight: 600; margin-bottom: 0.5rem;">
              Description
            </label>
            <textarea id="teacher-desc" placeholder="Teacher/staff achievements and recognition" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;"></textarea>
          </div>
          <button onclick="addTeacherSpotlight()" style="background-color: ${config.primary_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: none; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; cursor: pointer;">
            ‚ûï Add Teacher Spotlight
          </button>
          
          <div style="margin-top: 1.5rem;">
            <h4 style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 1.1}px; font-weight: 600; margin-bottom: 0.75rem;">
              Current Teacher Spotlights
            </h4>
            <div id="teacher-spotlight-list"></div>
          </div>
        `;
        renderTeacherSpotlightList();
      }
    }

    function renderAnnouncementList() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const list = document.getElementById('ann-list');
      if (!list) return;

      list.innerHTML = currentData.announcements.map((ann, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem; margin-bottom: 0.5rem;">
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
              <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600;">
                ${ann.title}
              </div>
              ${ann.urgent ? '<span style="background-color: #dc2626; color: white; padding: 0.125rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600;">URGENT</span>' : ''}
            </div>
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; opacity: 0.75;">
              ${ann.description}
            </div>
          </div>
          <button onclick="deleteAnnouncement(${index})" style="color: #dc2626; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.25rem;" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      `).join('');
    }

    function renderTickerList() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const list = document.getElementById('ticker-list');
      if (!list) return;

      list.innerHTML = currentData.ticker.map((msg, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem; margin-bottom: 0.5rem;">
          <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px;">
            ${msg}
          </div>
          <button onclick="deleteTicker(${index})" style="color: #dc2626; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.25rem;" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      `).join('');
    }

    function addAnnouncement() {
      const title = document.getElementById('ann-title').value;
      const description = document.getElementById('ann-desc').value;
      const type = document.getElementById('ann-type').value;
      const urgent = document.getElementById('ann-urgent').checked;

      if (title && description) {
        currentData.announcements.push({
          id: Date.now().toString(),
          title,
          description,
          type,
          urgent
        });

        document.getElementById('ann-title').value = '';
        document.getElementById('ann-desc').value = '';
        document.getElementById('ann-type').value = 'General';
        document.getElementById('ann-urgent').checked = false;

        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        currentAnnouncementIndex = 0;
        render(config);
        openAdmin();
        switchTab('announcements');
      }
    }

    function deleteAnnouncement(index) {
      currentData.announcements.splice(index, 1);
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      currentAnnouncementIndex = 0;
      render(config);
      openAdmin();
      switchTab('announcements');
    }

    function addTicker() {
      const msg = document.getElementById('ticker-msg').value;

      if (msg.trim()) {
        currentData.ticker.push(msg);
        document.getElementById('ticker-msg').value = '';

        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        render(config);
        openAdmin();
        switchTab('ticker');
      }
    }

    function deleteTicker(index) {
      currentData.ticker.splice(index, 1);
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      render(config);
      openAdmin();
      switchTab('ticker');
    }

    function renderEventList() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const list = document.getElementById('event-list');
      if (!list) return;

      list.innerHTML = currentData.events.map((event, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem; margin-bottom: 0.5rem; border-left: 4px solid ${config.primary_color};">
          <div style="flex: 1;">
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; margin-bottom: 0.25rem;">
              ${event.title}
            </div>
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; opacity: 0.75;">
              üìÖ ${event.date} ‚Ä¢ üìç ${event.location}
            </div>
          </div>
          <button onclick="deleteEvent(${index})" style="color: #dc2626; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.25rem;" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      `).join('');
    }

    function addEvent() {
      const title = document.getElementById('event-title').value;
      const date = document.getElementById('event-date').value;
      const location = document.getElementById('event-location').value;

      if (title && date && location) {
        currentData.events.push({
          id: Date.now().toString(),
          title,
          date,
          location
        });

        document.getElementById('event-title').value = '';
        document.getElementById('event-date').value = '';
        document.getElementById('event-location').value = '';

        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        render(config);
        openAdmin();
        switchTab('events');
      }
    }

    function deleteEvent(index) {
      currentData.events.splice(index, 1);
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      render(config);
      openAdmin();
      switchTab('events');
    }

    function renderStudentSpotlightList() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const list = document.getElementById('student-spotlight-list');
      if (!list) return;

      list.innerHTML = currentData.studentSpotlights.map((spotlight, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem; margin-bottom: 0.5rem;">
          <div style="flex: 1;">
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; margin-bottom: 0.25rem;">
              ${spotlight.title}
            </div>
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; opacity: 0.75;">
              ${spotlight.description}
            </div>
          </div>
          <button onclick="deleteStudentSpotlight(${index})" style="color: #dc2626; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.25rem;" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      `).join('');
    }

    function renderTeacherSpotlightList() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const list = document.getElementById('teacher-spotlight-list');
      if (!list) return;

      list.innerHTML = currentData.teacherSpotlights.map((spotlight, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; background-color: #f9fafb; border-radius: 0.5rem; margin-bottom: 0.5rem;">
          <div style="flex: 1;">
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size}px; font-weight: 600; margin-bottom: 0.25rem;">
              ${spotlight.name} - ${spotlight.department}
            </div>
            <div style="color: ${config.text_color}; font-family: ${config.font_family}, sans-serif; font-size: ${config.font_size * 0.85}px; opacity: 0.75;">
              ${spotlight.description}
            </div>
          </div>
          <button onclick="deleteTeacherSpotlight(${index})" style="color: #dc2626; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.25rem;" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      `).join('');
    }

    function addStudentSpotlight() {
      const title = document.getElementById('student-title').value;
      const description = document.getElementById('student-desc').value;

      if (title && description) {
        currentData.studentSpotlights.push({
          id: Date.now().toString(),
          title,
          description
        });

        document.getElementById('student-title').value = '';
        document.getElementById('student-desc').value = '';

        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        currentStudentSpotlightIndex = 0;
        render(config);
        openAdmin();
        switchTab('student-spotlight');
      }
    }

    function deleteStudentSpotlight(index) {
      currentData.studentSpotlights.splice(index, 1);
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      currentStudentSpotlightIndex = 0;
      render(config);
      openAdmin();
      switchTab('student-spotlight');
    }

    function addTeacherSpotlight() {
      const name = document.getElementById('teacher-name').value;
      const department = document.getElementById('teacher-dept').value;
      const description = document.getElementById('teacher-desc').value;

      if (name && department && description) {
        currentData.teacherSpotlights.push({
          id: Date.now().toString(),
          name,
          department,
          description
        });

        document.getElementById('teacher-name').value = '';
        document.getElementById('teacher-dept').value = '';
        document.getElementById('teacher-desc').value = '';

        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        currentTeacherSpotlightIndex = 0;
        render(config);
        openAdmin();
        switchTab('teacher-spotlight');
      }
    }

    function deleteTeacherSpotlight(index) {
      currentData.teacherSpotlights.splice(index, 1);
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      currentTeacherSpotlightIndex = 0;
      render(config);
      openAdmin();
      switchTab('teacher-spotlight');
    }

    async function onConfigChange(config) {
      render(config);
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['school_name', config.school_name || defaultConfig.school_name],
        ['school_subtitle', config.school_subtitle || defaultConfig.school_subtitle],
        ['location', config.location || defaultConfig.location],
        ['spotlight_title', config.spotlight_title || defaultConfig.spotlight_title],
        ['teacher_spotlight_title', config.teacher_spotlight_title || defaultConfig.teacher_spotlight_title],
        ['announcements_title', config.announcements_title || defaultConfig.announcements_title],
        ['events_title', config.events_title || defaultConfig.events_title]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Initial render
    render(defaultConfig);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9afa4191b4d31f2d',t:'MTc2NjAxNDcyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
